<?xml version="1.0" encoding="UTF-8"?>
<api xmlns="http://www.mulesoft.org/schema/mule/api-rest" xmlns:mule="http://www.mulesoft.org/schema/mule/core"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:http="http://www.mulesoft.org/schema/mule/http"
     xsi:schemaLocation="http://www.mulesoft.org/schema/mule/api-rest http://www.mulesoft.org/schema/mule/api-rest/current/mule-api-rest.xsd
       http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
       http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">

    <interface name="myInterface" version="2.3">
        <collection-resource name="products">
            <retrieve flow-ref="fakeFlow">
                <representation mediaType="application/json" quality="0.8" schemaType="JSONSchema" schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.Products"/>
            </retrieve>
            <member>
                <representation mediaType="application/json" schemaType="JSONSchema"
                                schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.Product"/>
                <create flow-ref="fakeFlow"/>
                <retrieve flow-ref="fakeFlow"/>
                <update flow-ref="fakeFlow"/>
                <delete flow-ref="fakeFlow"/>
                <collection-resource name="Issues">
                    <retrieve flow-ref="fakeFlow">
                        <representation mediaType="application/json" schemaType="JSONSchema" schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.Issues"/>
                        <parameters>
                            <query-parameter name="limit" description="Total amount of collection items to be retrieved" defaultValue="25"/>
                            <query-parameter name="offset" description="Offset at which the count should start" defaultValue="0"/>
                        </parameters>
                    </retrieve>
                    <member>
                        <retrieve flow-ref="fakeFlow">
                            <representation mediaType="application/json" schemaType="JSONSchema" schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.Issue"/>
                        </retrieve>
                    </member>
                </collection-resource>
                <document-resource name="strategicGoal">
                    <representation mediaType="application/json" schemaType="JSONSchema" schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.ProductGoal"/>
                    <retrieve flow-ref="fakeFlow"/>
                    <update flow-ref="fakeFlow"/>
                </document-resource>
            </member>
        </collection-resource>
        <collection-resource name="developers">
            <retrieve flow-ref="fakeFlow">
                <representation mediaType="application/json" quality="0.8" schemaType="JSONSchema" schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.Developers"/>
            </retrieve>
            <member>
                <representation mediaType="application/json" schemaType="JSONSchema"
                                schemaLocation="jsonschema:org.mule.module.apikit.rest.integration.swagger.Developer"/>
                <create flow-ref="fakeFlow"/>
                <retrieve flow-ref="fakeFlow"/>
                <update flow-ref="fakeFlow"/>
                <delete flow-ref="fakeFlow"/>
            </member>
        </collection-resource>
    </interface>

    <service name="myService" interface-ref="myInterface">
        <http:inbound-endpoint port="${serverPort}" host="localhost" path="api">
            <mule:object-to-string-transformer/>
        </http:inbound-endpoint>
        <swagger-documentation/>
    </service>

</api>